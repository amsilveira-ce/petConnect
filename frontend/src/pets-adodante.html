<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meus Pets Favoritos | PetConnect</title>
  <link rel="icon" type="image/x-icon" href="http://127.0.0.1:5501/frontend/public/logos/logo.svg">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#ec4899',
            secondary: '#fce7f3'
          }
        }
      }
    };
  </script>
  <style>
    .heart-icon {
      transition: all 0.3s ease;
    }
    .heart-icon:hover {
      transform: scale(1.2);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-900">
  <!-- Navbar -->
  <nav class="bg-white shadow-md sticky top-0 z-10">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center gap-3">
        <img src="http://127.0.0.1:5501/frontend/public/logos/logo.svg" alt="PetConnect" class="h-10 w-10">
        <span class="font-mono text-2xl font-semibold">PetConnect</span>
      </div>
      <div class="hidden md:flex gap-8">
        <a href="user-dashboard.html" class="text-gray-700 hover:text-primary transition">Dashboard</a>
        <a href="pets-adodante.html" class="text-primary font-semibold">Meus Pets</a>
        <a href="minhas-adocoes.html" class="text-gray-700 hover:text-primary transition">Minhas Ado√ß√µes</a>
        <button id="logoutBtn" class="bg-primary text-white px-6 py-2 rounded-full hover:bg-pink-600 transition">Sair</button>
      </div>
    </div>
  </nav>

  <!-- Conte√∫do -->
  <main class="max-w-7xl mx-auto px-6 py-12">
    <div class="flex justify-between items-center mb-8">
      <div>
        <h1 class="text-4xl font-bold text-gray-900">Meus Pets Favoritos ‚ù§Ô∏è</h1>
        <p class="text-gray-600 mt-2">Pets que voc√™ marcou como favoritos</p>
      </div>
      <a href="user-dashboard.html" class="bg-primary text-white px-6 py-3 rounded-full hover:bg-pink-600 transition">
        Explorar Mais Pets
      </a>
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="hidden text-center py-16">
      <div class="text-6xl mb-4">üíî</div>
      <h3 class="text-2xl font-bold text-gray-900 mb-2">Nenhum pet favoritado ainda</h3>
      <p class="text-gray-600 mb-6">Explore nossos pets dispon√≠veis e favorite os que voc√™ mais gostar!</p>
      <a href="user-dashboard.html" class="inline-block bg-primary text-white px-8 py-3 rounded-full hover:bg-pink-600 transition">
        Explorar Pets
      </a>
    </div>

    <!-- Grid de Pets -->
    <section id="petsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"></section>
  </main>

  <!-- Modal Detalhes -->
  <div id="petModal" class="hidden fixed inset-0 bg-black bg-opacity-40 backdrop-blur-sm flex items-center justify-center z-50">
    <div class="bg-white rounded-2xl shadow-2xl max-w-3xl w-full overflow-hidden">
      <div class="flex justify-between items-center border-b p-6">
        <h2 id="modalPetName" class="text-2xl font-bold text-gray-900">Detalhes do Pet</h2>
        <button id="closeModal" class="text-gray-600 hover:text-gray-900 text-2xl">&times;</button>
      </div>

      <div class="p-6 overflow-y-auto max-h-[80vh]">
        <img id="modalPetImage" src="" alt="Pet" class="w-full h-64 object-cover rounded-xl mb-6">

        <div id="modalPetDetails" class="space-y-4 text-gray-700"></div>

        <div class="mt-6 pt-4 border-t">
          <button id="modalAdoptBtn" class="w-full bg-primary text-white py-3 rounded-xl font-semibold hover:bg-pink-600 transition">
            Adotar Este Pet
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="bg-white py-6 mt-16 border-t text-center text-gray-500 text-sm">
    ¬© 2025 PetConnect ‚Äì Conectando cora√ß√µes humanos e animais ‚ù§Ô∏è
  </footer>

  <script>
    // Mock pets data (same as dashboard)
    const petsMock = [
      {
        _id: "pet1",
        name: "Luna",
        species: "dog",
        breed: "Labrador",
        size: "large",
        gender: "female",
        ageCategory: "young",
        ageYears: 2,
        color: { primary: "Dourado" },
        adoptionStatus: "available",
        description: "Luna √© muito carinhosa e adora brincar. Perfeita para fam√≠lias!",
        location: { city: "Bragan√ßa Paulista", state: "SP" },
        behaviorTags: ["friendly", "energetic", "good-with-kids"],
        healthInfo: { isVaccinated: true, isNeutered: true },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1617854970997-9526f01d0493?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet2",
        name: "Thor",
        species: "dog",
        breed: "Pastor Alem√£o",
        size: "large",
        gender: "male",
        ageCategory: "adult",
        ageYears: 4,
        color: { primary: "Preto e Marrom" },
        adoptionStatus: "available",
        description: "Thor √© protetor e leal. √ìtimo companheiro!",
        location: { city: "Campinas", state: "SP" },
        behaviorTags: ["protective", "loyal", "calm"],
        healthInfo: { isVaccinated: true, isNeutered: true },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1568572933382-74d440642117?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet3",
        name: "Mimi",
        species: "cat",
        breed: "Siam√™s",
        size: "small",
        gender: "female",
        ageCategory: "young",
        ageYears: 1,
        color: { primary: "Bege e Marrom" },
        adoptionStatus: "available",
        description: "Mimi √© independente mas muito carinhosa. Adora dormir no sol!",
        location: { city: "S√£o Paulo", state: "SP" },
        behaviorTags: ["independent", "affectionate", "quiet"],
        healthInfo: { isVaccinated: true, isNeutered: false },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1513245543132-31f507417b26?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet4",
        name: "Bob",
        species: "dog",
        breed: "Bulldog",
        size: "medium",
        gender: "male",
        ageCategory: "puppy",
        ageYears: 0.5,
        color: { primary: "Branco e Marrom" },
        adoptionStatus: "available",
        description: "Bob √© um filhote brincalh√£o que adora fazer amigos!",
        location: { city: "Jundia√≠", state: "SP" },
        behaviorTags: ["playful", "friendly", "energetic"],
        healthInfo: { isVaccinated: true, isNeutered: false },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet5",
        name: "Nina",
        species: "cat",
        breed: "Persa",
        size: "small",
        gender: "female",
        ageCategory: "adult",
        ageYears: 3,
        color: { primary: "Branco" },
        adoptionStatus: "available",
        description: "Nina √© tranquila e adora colo. Perfeita para apartamento!",
        location: { city: "Bragan√ßa Paulista", state: "SP" },
        behaviorTags: ["calm", "affectionate", "indoor"],
        healthInfo: { isVaccinated: true, isNeutered: true },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1495360010541-f48722b34f7d?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet6",
        name: "Rex",
        species: "dog",
        breed: "Rottweiler",
        size: "large",
        gender: "male",
        ageCategory: "senior",
        ageYears: 8,
        color: { primary: "Preto" },
        adoptionStatus: "available",
        description: "Rex √© calmo e experiente. Procura um lar tranquilo para seus anos dourados.",
        location: { city: "Atibaia", state: "SP" },
        behaviorTags: ["calm", "loyal", "experienced"],
        healthInfo: { isVaccinated: true, isNeutered: true },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1567752881298-894bb81f9379?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet7",
        name: "Mel",
        species: "cat",
        breed: "Vira-lata",
        size: "small",
        gender: "female",
        ageCategory: "puppy",
        ageYears: 0.3,
        color: { primary: "Laranja" },
        adoptionStatus: "available",
        description: "Mel √© uma filhote ador√°vel e cheia de energia!",
        location: { city: "Campinas", state: "SP" },
        behaviorTags: ["playful", "curious", "energetic"],
        healthInfo: { isVaccinated: true, isNeutered: false },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1574158622682-e40e69881006?w=800", isPrimary: true }]
        }
      },
      {
        _id: "pet8",
        name: "Max",
        species: "dog",
        breed: "Golden Retriever",
        size: "large",
        gender: "male",
        ageCategory: "young",
        ageYears: 2.5,
        color: { primary: "Dourado" },
        adoptionStatus: "available",
        description: "Max √© extremamente amig√°vel e adora crian√ßas. Um verdadeiro golden heart!",
        location: { city: "S√£o Paulo", state: "SP" },
        behaviorTags: ["friendly", "good-with-kids", "gentle"],
        healthInfo: { isVaccinated: true, isNeutered: true },
        media: {
          photos: [{ url: "https://images.unsplash.com/photo-1633722715463-d30f4f325e24?w=800", isPrimary: true }]
        }
      }
    ];

    // Get favorites from localStorage
    let favorites = JSON.parse(localStorage.getItem('favorites')) || [];

    // Toggle favorite
    function toggleFavorite(petId) {
      const index = favorites.indexOf(petId);
      if (index > -1) {
        favorites.splice(index, 1);
      } else {
        favorites.push(petId);
      }
      localStorage.setItem('favorites', JSON.stringify(favorites));
      renderFavoritePets();
    }

    // Render favorite pets
    function renderFavoritePets() {
      const petsGrid = document.getElementById("petsGrid");
      const emptyState = document.getElementById("emptyState");
      
      // Get favorite pets
      const favoritePets = petsMock.filter(pet => favorites.includes(pet._id));
      
      if (favoritePets.length === 0) {
        petsGrid.innerHTML = '';
        emptyState.classList.remove('hidden');
        return;
      }
      
      emptyState.classList.add('hidden');
      petsGrid.innerHTML = '';

      favoritePets.forEach(pet => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-2xl shadow-md hover:shadow-xl transition overflow-hidden group";
        card.innerHTML = `
          <div class="relative">
            <img src="${pet.media.photos[0].url}" alt="${pet.name}" 
              class="w-full h-56 object-cover group-hover:scale-105 transition duration-300 cursor-pointer"
              onclick="openPetModal('${pet._id}')">
            <button onclick="toggleFavorite('${pet._id}')" 
              class="absolute top-3 right-3 bg-white p-2 rounded-full shadow-lg heart-icon">
              <svg class="w-6 h-6 text-pink-500" fill="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
              </svg>
            </button>
            <span class="absolute top-3 left-3 bg-green-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
              Dispon√≠vel
            </span>
          </div>
          <div class="p-5">
            <h3 class="text-2xl font-bold text-gray-900 mb-2">${pet.name}</h3>
            <p class="text-gray-600 mb-3">${pet.breed} ‚Ä¢ ${getGenderText(pet.gender)} ‚Ä¢ ${getAgeText(pet.ageCategory)}</p>
            <p class="text-sm text-gray-500 mb-4">üìç ${pet.location.city} - ${pet.location.state}</p>
            <p class="text-gray-700 text-sm mb-4 line-clamp-2">${pet.description}</p>
            <div class="flex gap-2 mb-4 flex-wrap">
              ${pet.behaviorTags.slice(0, 2).map(tag => 
                `<span class="px-3 py-1 bg-pink-50 text-pink-600 rounded-full text-xs font-medium">${getBehaviorText(tag)}</span>`
              ).join('')}
            </div>
            <button onclick="goToAdoptionForm('${pet._id}')" 
              class="w-full bg-primary text-white py-3 rounded-xl font-semibold hover:bg-pink-600 transition">
              Adotar ${pet.name}
            </button>
          </div>
        `;
        petsGrid.appendChild(card);
      });
    }

    // Modal functions
    const modal = document.getElementById('petModal');
    const closeModal = document.getElementById('closeModal');
    let currentModalPetId = null;

    closeModal.addEventListener('click', () => modal.classList.add('hidden'));
    modal.addEventListener('click', e => { if (e.target === modal) modal.classList.add('hidden'); });

    function openPetModal(petId) {
      const pet = petsMock.find(p => p._id === petId);
      if (!pet) return;

      currentModalPetId = petId;
      document.getElementById('modalPetName').textContent = pet.name;
      document.getElementById('modalPetImage').src = pet.media.photos[0].url;

      const details = `
        <div><strong>Esp√©cie:</strong> ${pet.species === 'dog' ? 'Cachorro' : 'Gato'}</div>
        <div><strong>Ra√ßa:</strong> ${pet.breed}</div>
        <div><strong>Tamanho:</strong> ${getSizeText(pet.size)}</div>
        <div><strong>G√™nero:</strong> ${getGenderText(pet.gender)}</div>
        <div><strong>Idade:</strong> ${pet.ageYears} anos (${getAgeText(pet.ageCategory)})</div>
        <div><strong>Cor:</strong> ${pet.color.primary || '-'}</div>
        <div><strong>Comportamento:</strong> ${pet.behaviorTags.map(tag => getBehaviorText(tag)).join(', ')}</div>
        <div><strong>Sa√∫de:</strong> ${pet.healthInfo.isVaccinated ? 'Vacinado' : 'N√£o vacinado'}, ${pet.healthInfo.isNeutered ? 'Castrado' : 'N√£o castrado'}</div>
        <div><strong>Localiza√ß√£o:</strong> ${pet.location.city} - ${pet.location.state}</div>
        <div class="mt-4"><strong>Descri√ß√£o:</strong><br>${pet.description}</div>
      `;
      document.getElementById('modalPetDetails').innerHTML = details;

      document.getElementById('modalAdoptBtn').onclick = () => goToAdoptionForm(petId);

      modal.classList.remove('hidden');
    }

    // Navigation to adoption form
    function goToAdoptionForm(petId) {
      localStorage.setItem('adoptingPetId', petId);
      window.location.href = 'adoption-form.html';
    }

    // Helper functions
    function getSizeText(size) {
      const sizeMap = { small: 'Pequeno', medium: 'M√©dio', large: 'Grande' };
      return sizeMap[size] || size;
    }

    function getGenderText(gender) {
      return gender === 'male' ? 'Macho' : 'F√™mea';
    }

    function getAgeText(age) {
      const ageMap = { puppy: 'Filhote', young: 'Jovem', adult: 'Adulto', senior: 'Idoso' };
      return ageMap[age] || age;
    }

    function getBehaviorText(behavior) {
      const behaviorMap = {
        friendly: 'Amig√°vel',
        energetic: 'Energ√©tico',
        playful: 'Brincalh√£o',
        calm: 'Calmo',
        protective: 'Protetor',
        loyal: 'Leal',
        'good-with-kids': 'Bom com crian√ßas',
        affectionate: 'Carinhoso',
        independent: 'Independente',
        quiet: 'Quieto',
        indoor: 'Indoor',
        curious: 'Curioso',
        gentle: 'Gentil',
        experienced: 'Experiente'
      };
      return behaviorMap[behavior] || behavior;
    }

    // Logout
    document.getElementById('logoutBtn').addEventListener('click', () => {
      localStorage.removeItem('userInfo');
      window.location.href = 'index.html';
    });

    // Initialize
    renderFavoritePets();
  </script>
</body>
</html>